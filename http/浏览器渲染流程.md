# 输入URL后的渲染流程

* 首先会使用 DNS 协议查找域名对应的 IP 地址，先浏览器、再看本地 hosts 文件、再看路由器是否有缓存，如果都没有缓存就去对对应的内容提供商查到对应的 IP 地址
* 拿到 IP 地址后就会建立连接，TCP 的三次握手，然后会发送 请求 到服务端（同一个域名下只允许同时发送6个请求）
* 服务端接收到请求后会做出响应，向 客户端发送 内容（响应头 响应体）
* 如果内容被设置过 GZIP 压缩，则浏览器会先进行内容解压
* 对 html 文件进行解析，然后开始解析 DOM，与些同时会发起各种文件的请求，图片 CSS JS
* DOM 生成 DOM 树， 根据 CSS 生成 CSS 树 ， 将 DOM 树 和 CSS 树 生成 渲染树，回流、重绘，渲染
* 状态码为 301 302 的时候会被重定向，再次发送请求，304 会使用浏览器的缓存文件

## 渲染流程

![](../assets/imgs/broswer-render.png)

* 解析 HTML 生成 DOM 树
* 解析 CSS 生成 CSSOM (document.styleSheets)
* 根据 DOM 树 和 CSSOM 计算每个元素的具体样式
* 根据计算结果生成 render tree（渲染树）
* 根据 render tree 进行分层生成图层树（根据定位属性、透明属性、transform 属性、clip 属性分层）