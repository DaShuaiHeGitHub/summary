# 性能优化

## 网络优化策略

* 减少请求数量，合并 js css，合理的内嵌 js css
* 采用域名分片技术，因为同一时间同一个域名下仅允许同时发送6个请求
* 避免重定向 301 302
* 使用缓存
    * 强缓存：cache-control
    * 协商缓存：Etag/if-none-match 和 Lats-modify/in-modified-since
* 使用 dns-prefetch
```html
<link rel="dns-prefetch" href="//d.jd.com"/>
```
* 采用 CDN 加速（就近指派、高度可用）
* 采用 GZIP 压缩 html js css 等文件，(图片、音频、视频不要使用，可能会起反效果)
* 使用 prefetch 优先加载资源，使用 prefetch 预加载资源
```html
<!-- 优先加载 -->
<link rel="preload" href="/style/common.css" as="style">

<!-- 预加载 -->
<link rel="prefetch" href="/video/animate.mp4">
```

## 关键渲染路径

- style 标签 和 css 引用放在 header 中，因为放在元素后面会导致渲染两次 DOM
- script 标签 和 js 引用 放在 body 的最后面， 因为 JS 的加载会堵塞 DOM 的渲染

## 静态文件优化